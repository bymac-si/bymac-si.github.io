<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>CRM - Copropiedades</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="assets/css/styles.css" />
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1a2b48">
<link rel="apple-touch-icon" href="assets/img/icon-192.png">

    <script src="assets/js/app.js"></script>
    <script>
      requireAuth();
    </script>

    
      <link rel="stylesheet" href="assets/css/pages/copropiedades.inline.css">
</head>
  <body>
    <div id="header"></div>

    <main>
      <div class="dashboard-header no-print">
        <div class="header-top">
          <h1 class="page-title">Copropiedades</h1>

          <div class="header-actions">
            <button
              class="btn-head btn-secundario"
              id="btnReload"
              title="Recargar datos"
            >
              <i class="fa-solid fa-rotate-right"></i>
              <span class="btn-text">Recargar</span>
            </button>

            <button
              class="btn-head btn-secundario"
              id="btnExport"
              title="Descargar CSV"
            >
              <i class="fa-solid fa-file-csv"></i>
              <span class="btn-text">Exportar</span>
            </button>

            <button
              class="btn-head btn-secundario"
              onclick="window.print()"
              title="Imprimir vista"
            >
              <i class="fa-solid fa-print"></i>
              <span class="btn-text">Imprimir</span>
            </button>

            <button class="btn-head btn-nuevo" id="btnNew">
              <i class="fa-solid fa-plus"></i>
              <span>Nueva Copropiedad</span>
            </button>
          </div>
        </div>

        <div class="header-filters">
          <div class="filter-item" style="flex-grow: 1">
            <label class="label">Buscar</label>
            <input
              id="inpBuscar"
              class="input-modern"
              placeholder="Nombre, RUT, Dirección, Comuna..."
              type="text"
            />
          </div>
        </div>
      </div>

      <table>
        <thead>
          <tr>
            <th>Nombre</th>
            <th>RUT</th>
            <th>Dirección</th>
            <th>Comuna</th>
            <th>Ciudad</th>
            <th>Unidades</th>
            <th>Fondo R.</th>
            <th class="no-print" style="width: 140px">Acciones</th>
          </tr>
        </thead>
        <tbody id="tablaCopros">
          <tr>
            <td colspan="7" class="muted">Cargando datos...</td>
          </tr>
        </tbody>
      </table>
    </main>

    <div id="modalCopro" class="modal" aria-hidden="true">
      <div class="modal-content">
        <h2 id="modalTitleCopro" style="margin-top: 0">Nueva Copropiedad</h2>
        <form id="formCopro" style="margin-top: 20px">
          <input type="hidden" id="coproID" />

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px">
            <div style="grid-column: 1 / -1">
              <label class="label">Nombre del Condominio</label>
              <input id="coproNombre" required />
            </div>

            <div>
              <label class="label">RUT</label>
              <input id="coproRUT" />
            </div>
             <div>
              <label class="label">Unidades</label>
              <input id="coproUnidades" />
            </div>
            <div>
              <label class="label">Fondo de Reserva (%)</label>
              <input
                id="coproFondo"
                type="number"
                step="0.01"
                placeholder="Ej: 5"
              />
            </div>

            <div style="grid-column: 1 / -1">
              <label class="label">Dirección</label>
              <input id="coproDireccion" />
            </div>

            <div>
              <label class="label">Comuna</label>
              <input id="coproComuna" />
            </div>
            <div>
              <label class="label">Ciudad</label>
              <input id="coproCiudad" />
            </div>

            <div>
              <label class="label">Banco</label>
              <input id="coproBanco" />
            </div>
            <div>
              <label class="label">Cuenta</label>
              <input id="coproCuenta" />
            </div>

            <div>
              <label class="label">Email Admin.</label>
              <input id="coproEmailAdmin" type="email" />
            </div>
            <div>
              <label class="label">Teléfono</label>
              <input id="coproTelefono" />
            </div>

            <div style="grid-column: 1 / -1">
              <label class="label">URL Reglamento</label>
              <input id="coproReglamento" placeholder="https://..." />
            </div>
            <div style="grid-column: 1 / -1">
              <label class="label">URL Libro Actas</label>
              <input id="coproLibro" placeholder="https://..." />
            </div>
          </div>

          <div style="text-align: right; margin-top: 20px">
            <button
              type="button"
              class="btn-primary"
              style="background: #6c757d; border: none"
              onclick="cerrarModalCopro()"
            >
              Cancelar
            </button>
            <button class="btn-primary" style="border: none">Guardar</button>
          </div>
        </form>
      </div>
    </div>

    <div id="pageSpinner" class="spinner-backdrop" aria-hidden="true">
      <div class="spinner-card">
        <div class="spinner"></div>
        <div id="spinnerText">Cargando…</div>
      </div>
    </div>

    <div id="footer"></div>

    <script src="assets/js/pages/copropiedades.inline.js"></script>
  </body>
</html>
