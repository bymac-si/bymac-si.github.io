<style>
  /* =========================================
     ESTILOS BASE (ESCRITORIO - Default)
     ========================================= */
  
  /* 1. Contenedor Principal */
  .main-header {
    background-color: #ffffff;
    border-bottom: 1px solid #e2e8f0;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    padding: 0 25px;
    height: 70px;
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    position: sticky;
    top: 0;
    z-index: 1000;
    width: 100%;
    box-sizing: border-box;
    flex-wrap: nowrap !important;
  }

  /* 2. Logo */
  .logo-img {
    height: 50px; 
    width: auto;
    transition: transform 0.2s;
    display: block;
  }
  .logo-img:hover { transform: scale(1.05); }

  /* 3. Navegación (Menú Central) */
  .nav-container {
    display: flex;
    gap: 10px;
    height: 100%;
    align-items: center;
    margin-left: auto; /* Empuja a la derecha en escritorio */
  }

  /* Links */
  .nav-link {
    text-decoration: none;
    color: #64748b;
    font-weight: 600;
    font-size: 13px;
    padding: 8px 12px;
    border-radius: 6px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
    border-bottom: none; /* Asegura que no tenga borde en escritorio */
  }

  .nav-link:hover { color: #0f172a; background-color: #f1f5f9; }
  .nav-link.active { color: #3b82f6; background-color: #eff6ff; }

  /* Dropdowns (Escritorio) */
  .nav-dropdown { position: relative; height: 100%; display: flex; align-items: center; }

  .dropdown-menu {
    display: none;
    position: absolute;
    top: 60px;
    left: 0;
    background: white;
    min-width: 220px;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    padding: 8px 0;
    list-style: none;
    z-index: 1001;
    animation: fadeIn 0.2s ease;
  }

  .nav-dropdown:hover .dropdown-menu { display: block; }
  .dropdown-menu li { margin: 0; }

  .dropdown-menu li a {
    display: flex; align-items: center; gap: 10px;
    padding: 10px 20px; color: #475569; text-decoration: none;
    font-size: 13px; transition: background 0.2s;
    border-bottom: none;
  }
  .dropdown-menu li a:hover { background-color: #f8fafc; color: #0f172a; padding-left: 25px; }
  .dropdown-menu li a i { width: 16px; text-align: center; color: #94a3b8; }
  .dropdown-menu li a:hover i { color: #3b82f6; }

  /* Submenús (Escritorio) */
  .dropdown-submenu { position: relative; }
  .dropdown-submenu .submenu {
    display: none; position: absolute; top: -5px; left: 100%; margin-left: 5px;
    background: white; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    border: 1px solid #e2e8f0; min-width: 180px; padding: 5px 0; list-style: none; z-index: 1002;
  }
  .dropdown-submenu:hover > .submenu { display: block; }
  .dropdown-submenu .submenu li a:hover { background-color: #f1f5f9; }

  /* 4. Sección Usuario */
  .user-actions {
    display: flex; align-items: center; gap: 15px; margin-left: 15px;
    padding-left: 15px; border-left: 1px solid #e2e8f0;
    flex-shrink: 0 !important; min-width: max-content;
    background: transparent;
    border-top: none;
  }
  .user-info { text-align: right; line-height: 1.2; }
  .user-name { font-weight: 700; font-size: 13px; color: #1e293b; display: block; }
  .user-role { font-size: 11px; color: #94a3b8; text-transform: uppercase; }

  .btn-logout {
    color: #ef4444; border: 1px solid #fee2e2; background: #fef2f2;
    padding: 0; width: 36px; height: 36px; border-radius: 6px; font-size: 14px;
    cursor: pointer; text-decoration: none; transition: all 0.2s;
    display: flex; align-items: center; justify-content: center;
  }
  .btn-logout:hover { background: #fee2e2; transform: translateY(-1px); }

  @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

  /* Mobile Toggle */
  .mobile-toggle { display: none; background: none; border: none; font-size: 24px; cursor: pointer; color: #1e293b; padding: 10px; }

  /* =========================================
     RESPONSIVE MOBILE (Hasta 1100px)
     ========================================= */
  @media (max-width: 1100px) {
    .mobile-toggle { display: block; }
    
    .nav-container {
      display: none; 
      position: fixed;
      top: 70px;
      left: 0;
      width: 100%;
      height: calc(100vh - 70px);
      background: #ffffff;
      flex-direction: column;
      align-items: flex-start;
      padding: 0;
      overflow-y: auto;
      z-index: 2000;
      border-top: 1px solid #e2e8f0;
      padding-bottom: 40px;
    }
    
    .nav-container.active { display: flex; }

    /* Estilos enlaces MÓVIL */
    .nav-link, .nav-dropdown { width: 100%; box-sizing: border-box; }
    .nav-link { 
      padding: 15px 20px; 
      border-bottom: 1px solid #f1f5f9; 
      font-size: 15px; 
      justify-content: space-between; 
    }
    
    .nav-dropdown { flex-direction: column; align-items: flex-start; height: auto; }
    
    /* MENÚ DESPLEGABLE MÓVIL (Nivel 1) */
    .dropdown-menu {
      position: static; 
      box-shadow: none; 
      border: none; 
      width: 100%; 
      padding: 0; 
      display: none; 
      background-color: #f8fafc;
    }
    
    /* Mostrar menús al hover/active en móvil */
    .nav-dropdown:hover .dropdown-menu,
    .nav-dropdown:active .dropdown-menu,
    .nav-dropdown:focus-within .dropdown-menu { 
        display: block; 
    }

    .dropdown-menu li a { 
        padding: 12px 20px 12px 40px; 
        border-bottom: 1px solid #eee;
        color: #334155;
    }

    /* SUBMENÚ MÓVIL (Nivel 2) */
    .dropdown-submenu { 
        display: block; 
        width: 100%;
    }
    
    .dropdown-submenu .submenu {
        position: static !important;
        display: block !important;
        width: 100% !important;
        box-shadow: none !important;
        border: none !important;
        margin: 0 !important;
        background-color: #eff6ff !important;
        padding: 0;
    }

    .dropdown-submenu .submenu li a {
        padding-left: 60px !important;
        font-size: 13px;
        color: #1e3a8a;
    }

    .dropdown-submenu > a i.fa-chevron-right {
        transform: rotate(90deg);
    }

    /* Usuario al final en MÓVIL */
    .user-actions {
      width: 100%; margin: 0; padding: 20px; 
      border-top: 2px solid #e2e8f0; 
      border-left: none; /* Quitar borde izquierdo de desktop */
      justify-content: space-between;
      flex-direction: row-reverse; 
      background: #ffffff;
      margin-top: auto; 
    }
    .user-info { text-align: left; }
  }
</style>

<header class="main-header no-print">
  <a
    href="index.html"
    style="display: flex; align-items: center; text-decoration: none"
  >
    <img
      src="assets/img/logo_santajosefina.png"
      alt="Santa Josefina"
      class="logo-img"
    />
  </a>

  <button class="mobile-toggle" onclick="toggleMenu()">
    <i class="fa-solid fa-bars"></i>
  </button>

  <nav class="nav-container" id="navMenu">
    <div class="nav-dropdown">
      <a href="#" class="nav-link dropdown-toggle">
        <div style="display:flex; align-items:center; gap:6px;">
            <i class="fa-solid fa-handshake"></i> <span>Corretaje</span>
        </div>
        <i
          class="fa-solid fa-chevron-down"
          style="font-size: 10px; margin-left: 4px"
        ></i>
      </a>
      <ul class="dropdown-menu">
        <li>
          <a href="dashboard.html"
            ><i class="fa-solid fa-chart-line"></i> KPIs Generales</a
          >
        </li>
        <li>
          <a href="contactos.html"><i class="fa-solid fa-inbox"></i> Buzón Web</a>
        </li>
        <li>
          <a href="clientes.html"><i class="fa-solid fa-users"></i> Clientes</a>
        </li>
        <li>
          <a href="propiedades.html"
            ><i class="fa-solid fa-house"></i> Propiedades</a
          >
        </li>
      </ul>
    </div>

    <div class="nav-dropdown">
      <a href="#" class="nav-link dropdown-toggle">
        <div style="display:flex; align-items:center; gap:6px;">
            <i class="fa-solid fa-building"></i> <span>Condominios</span>
        </div>
        <i
          class="fa-solid fa-chevron-down"
          style="font-size: 10px; margin-left: 4px"
        ></i>
      </a>
      <ul class="dropdown-menu">
        <li>
          <a href="dashboardcopropiedades.html"
            ><i class="fa-solid fa-chart-pie"></i> KPIs Condominios</a
          >
        </li>
        <li style="border-top: 1px solid #f1f5f9; margin: 4px 0"></li>
        <li>
          <a href="copropiedades.html"
            ><i class="fa-solid fa-city"></i> Comunidades</a
          >
        </li>
        <li>
          <a href="unidades.html"
            ><i class="fa-solid fa-door-closed"></i> Unidades</a
          >
        </li>
        <li>
          <a href="copropietarios.html"
            ><i class="fa-solid fa-user-group"></i> Copropietarios</a
          >
        </li>
        <li class="dropdown-submenu">
          <a
            href="#"
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
            "
          >
            <span
              ><i class="fa-solid fa-user-plus"></i> Gestión Prospectos</span
            >
            <i class="fa-solid fa-chevron-right" style="font-size: 10px"></i>
          </a>
          <ul class="dropdown-menu submenu">
            <li>
              <a href="prospectos.html"
                ><i class="fa-solid fa-list-ul"></i> Listado</a
              >
            </li>
            <li>
              <a href="mapa.html"
                ><i class="fa-solid fa-map-location-dot"></i> Mapa Geo</a
              >
            </li>
          </ul>
        </li>
      </ul>
    </div>

    <div class="nav-dropdown">
      <a href="#" class="nav-link dropdown-toggle">
        <div style="display:flex; align-items:center; gap:6px;">
            <i class="fa-solid fa-coins"></i> <span>Finanzas</span>
        </div>
        <i
          class="fa-solid fa-chevron-down"
          style="font-size: 10px; margin-left: 4px"
        ></i>
      </a>
      <ul class="dropdown-menu">
        <li>
          <a href="conciliacion.html"
            ><i class="fa-solid fa-check-double"></i> Conciliación</a
          >
        </li>
        <li>
          <a href="gastos.html"
            ><i class="fa-solid fa-file-invoice-dollar"></i> Gastos Comunes</a
          >
        </li>
        <li>
          <a href="proveedores.html"
            ><i class="fa-solid fa-truck-field"></i> Proveedores</a
          >
        </li>
        <li>
          <a href="reportes.html"
            ><i class="fa-solid fa-file-pdf"></i> Reportes</a
          >
        </li>
      </ul>
    </div>

    <div class="nav-dropdown">
      <a href="#" class="nav-link dropdown-toggle">
        <div style="display:flex; align-items:center; gap:6px;">
            <i class="fa-solid fa-tree"></i> <span>Espacios/Reclamos</span>
        </div>
        <i
          class="fa-solid fa-chevron-down"
          style="font-size: 10px; margin-left: 4px"
        ></i>
      </a>
      <ul class="dropdown-menu">
        <li>
          <a href="gestion_reservas.html"
            ><i class="fa-regular fa-calendar-check"></i> Gestionar Reservas</a
          >
        </li>
        <li>
          <a href="admin-espacios.html"
            ><i class="fa-solid fa-pen-ruler"></i> Configurar Espacios</a
          >
        </li>
        <li>
          <a href="gestion_reclamos.html"
            ><i class="fa-solid fa-pen-ruler"></i> Gestionar Reclamos</a
          >
        </li>
      </ul>
    </div>

    <a href="marketing.html" class="nav-link">
      <i class="fa-solid fa-bullhorn"></i> <span>MKT</span>
    </a>

    <a id="linkAgentes" href="agentes.html" class="nav-link">
      <i class="fa-solid fa-user-tie"></i> <span>Agentes</span>
    </a>

    <div class="user-actions">
      <div class="user-info">
        <span class="user-name" id="headerUserName">Usuario</span>
        <span class="user-role" id="headerUserRole">Agente</span>
      </div>
      <a href="#" class="btn-logout" onclick="logout()" title="Cerrar Sesión">
        <i class="fa-solid fa-power-off"></i>
      </a>
    </div>
  </nav>
</header>