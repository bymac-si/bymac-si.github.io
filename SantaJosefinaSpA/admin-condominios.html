<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>CRM - Generador de Contratos</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="assets/css/styles.css" />
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1a2b48">
<link rel="apple-touch-icon" href="assets/img/icon-192.png">

    <script src="assets/js/app.js"></script>
    <script>
      requireAuth();
    </script>

    
      <link rel="stylesheet" href="assets/css/pages/admin-condominios.inline.css">
</head>
  <body>
    <div id="header" class="no-print"></div>

    <main class="container">
      <div class="dashboard-header no-print">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
          "
        >
          <h1 class="page-title" style="margin: 0">Generador de Contratos</h1>
          <div style="display: flex; gap: 10px">
            <button
              class="btn-head btn-secondary"
              onclick="window.location.reload()"
            >
              <i class="fa-solid fa-rotate-right"></i> Actualizar
            </button>
            <button class="btn-head btn-primary" onclick="imprimir()">
              <i class="fa-solid fa-print"></i> Imprimir Contrato
            </button>
          </div>
        </div>

        <div class="controls-row">
          <div>
            <label class="label">Seleccionar Copropiedad</label>
            <select id="selCopro" class="input-modern"></select>
          </div>
          <div>
            <label class="label">Comuna</label>
            <input
              id="inpComuna"
              readonly
              class="input-modern"
              style="background: #f1f5f9"
            />
          </div>
          <div>
            <label class="label">Factor (Tarifa)</label>
            <input
              id="inpFactor"
              readonly
              class="input-modern mono"
              style="background: #f1f5f9; text-align: center"
            />
          </div>
          <div>
            <label class="label">N° Unidades</label>
            <input
              id="inpUnidades"
              readonly
              class="input-modern mono"
              style="background: #f1f5f9; text-align: center"
            />
          </div>
          <div>
            <label class="label">Valor UTM (CLP)</label>
            <input
              id="inpUTM"
              class="input-modern mono"
              placeholder="Ej: 69.751"
              inputmode="decimal"
              style="border-color: #3b82f6"
            />
          </div>
        </div>
      </div>

      <div class="grid-info no-print">
        <div class="card-info">
          <h3 class="card-title">
            <i class="fa-solid fa-building"></i> Resumen del Cliente
          </h3>
          <div class="info-item">
            <span class="info-label">Copropiedad:</span>
            <span class="info-value" id="cxCopro">—</span>
          </div>
          <div class="info-item">
            <span class="info-label">RUT:</span>
            <span class="info-value mono" id="cxRUT">—</span>
          </div>
          <div class="info-item">
            <span class="info-label">Dirección:</span>
            <span class="info-value" id="cxDir">—</span>
          </div>
          <div class="info-item">
            <span class="info-label">Comuna:</span>
            <span class="info-value"
              ><span id="cxComuna">—</span>
              <span style="color: #64748b; font-size: 12px"
                >(Factor: <span id="cxFactor">—</span>)</span
              ></span
            >
          </div>
        </div>

        <div class="card-info">
          <h3 class="card-title">
            <i class="fa-solid fa-calculator"></i> Cálculo de Honorarios
          </h3>
          <div style="margin-bottom: 15px">
            <div class="info-label" style="font-size: 12px; margin-bottom: 4px">
              Fórmula aplicada:
            </div>
            <div
              class="mono"
              id="outFormula"
              style="
                font-size: 12px;
                color: #475569;
                background: #f8fafc;
                padding: 6px;
                border-radius: 4px;
              "
            >
              —
            </div>
          </div>

          <table class="simple-table">
            <tr>
              <th>Honorario Neto</th>
              <td id="outMontoNeto">—</td>
            </tr>
            <tr>
              <th>IVA (19%)</th>
              <td id="outIVA">—</td>
            </tr>
            <tr class="total-row">
              <th>Total a Pagar</th>
              <td id="outTotal">—</td>
            </tr>
          </table>
        </div>
      </div>

      <div class="contrato print-only" id="areaContrato">
        <div style="text-align: center; margin-bottom: 40px">
          <img
            src="assets/img/logo_santajosefina.png"
            alt="Santa Josefina SpA"
            style="width: 180px"
          />
          <div style="font-size: 10pt; color: #666; margin-top: 5px">
            Administración de Edificios y Condominios
          </div>
        </div>

        <h2
          style="
            text-align: center;
            text-transform: uppercase;
            margin-bottom: 30px;
            font-size: 16pt;
          "
        >
          Contrato de Administración
        </h2>

        <p>
          En Santiago, a
          <span id="c_fecha_hoy" style="font-weight: bold">[Fecha]</span>,
          entre:
        </p>

        <p>
          Por una parte, <b><span id="c_razon">[Nombre Comunidad]</span></b
          >, RUT <b><span id="c_rut">[RUT]</span></b
          >, representada por su Comité de Administración, con domicilio en
          <span id="c_dir">[Dirección]</span>, comuna de
          <span id="c_comuna">[Comuna]</span>, en adelante la
          <b>"COMUNIDAD"</b>; y
        </p>

        <p>
          Por otra parte, <b>SANTA JOSEFINA SpA</b>, RUT 77.233.573-3,
          representada por don <b>Marcos Castro Abarca</b>, ambos con domicilio
          para estos efectos en Santiago, en adelante el <b>"ADMINISTRADOR"</b>.
        </p>

        <p>
          Se ha convenido el siguiente contrato de prestación de servicios de
          administración:
        </p>

        <h3>PRIMERO: OBJETO</h3>
        <p>
          La Comunidad encomienda al Administrador la gestión administrativa,
          operativa y financiera del condominio denominado
          <b><span id="c_razon_2">[Nombre]</span></b
          >, ubicado en <span id="c_dir_2">[Dirección]</span>, conformado por un
          total de <b><span id="c_unidades">[N]</span></b> unidades.
        </p>
<br><br>
        <h3>SEGUNDO: HONORARIOS</h3>
        <p>
          Los honorarios mensuales por los servicios de administración se fijan
          en la suma líquida de:
        </p>

        <table
          style="
            width: 80%;
            margin: 20px auto;
            border: 1px solid #000;
            border-collapse: collapse;
          "
        >
          <tr>
            <td style="padding: 8px; border: 1px solid #000">Honorario Neto</td>
            <td
              style="
                padding: 8px;
                border: 1px solid #000;
                text-align: right;
                font-family: monospace;
              "
              id="c_monto_neto"
            >
              —
            </td>
          </tr>
          <tr>
            <td style="padding: 8px; border: 1px solid #000">IVA (19%)</td>
            <td
              style="
                padding: 8px;
                border: 1px solid #000;
                text-align: right;
                font-family: monospace;
              "
              id="c_monto_iva"
            >
              —
            </td>
          </tr>
          <tr>
            <td style="padding: 8px; border: 1px solid #000; font-weight: bold">
              TOTAL MENSUAL
            </td>
            <td
              style="
                padding: 8px;
                border: 1px solid #000;
                text-align: right;
                font-family: monospace;
                font-weight: bold;
              "
              id="c_monto_tot"
            >
              —
            </td>
          </tr>
        </table>

        <p>
          Este monto ha sido calculado en base a una UTM referencial de
          <span id="c_utm">[UTM]</span> y al factor de la comuna de
          <span id="c_comuna_2">[Comuna]</span> (<span id="c_factor">[F]</span
          >).
        </p>

        <h3>TERCERO: OBLIGACIONES Y VIGENCIA</h3>
        <p>
          El Administrador se obliga a cumplir con todas las funciones
          estipuladas en la Ley N° 21.442 sobre Copropiedad Inmobiliaria. El
          presente contrato tendrá una vigencia indefinida, pudiendo cualquiera
          de las partes ponerle término dando aviso por escrito con al menos 30
          días de anticipación.
        </p>

        <br /><br /><br /><br /><br />

        <div class="firma-grid">
          <div class="firma-box">
            <div class="firma-line"></div>
            <div><b>POR LA COMUNIDAD</b></div>
            <div style="font-size: 10pt" id="c_razon_firma">
              [Nombre Comunidad]
            </div>
          </div>

          <div class="firma-box">
            <div class="firma-line"></div>
            <div><b>MARCOS CASTRO ABARCA</b></div>
            <div style="font-size: 10pt">Santa Josefina SpA</div>
          </div>
        </div>
      </div>
    </main>

    <div id="pageSpinner" class="spinner-backdrop" aria-hidden="true">
      <div class="spinner-card">
        <div class="spinner"></div>
        <div id="spinnerText">Cargando datos...</div>
      </div>
    </div>

    <div id="footer" class="no-print"></div>

    <script src="assets/js/pages/admin-condominios.inline.js"></script>
  </body>
</html>
